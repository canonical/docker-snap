#!/bin/bash
# Detect if nvidia support enabled, and available, for a system type #

. "${SNAP}/usr/share/nvidia-container-toolkit/lib"

# Just exit if NVIDIA support is disabled #
[ "${NVIDIA_SUPPORT_DISABLED}" != "true" ] || exit_inf "NVIDIA support disabled by user"

NVIDIA_ENABLE="false"

# Determine if we can enable NVIDIA support or not #
[ "${NVIDIA_SUPPORT_CORE}" == "true" ] && NVIDIA_ENABLE="true"
[ "${NVIDIA_SUPPORT_CLASSIC}" == "true" ] && NVIDIA_ENABLE="true"

[ "${NVIDIA_ENABLE}" == "true" ] || exit_inf "No NVIDIA support detected"

exec "$@"
